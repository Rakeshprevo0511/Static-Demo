<!DOCTYPE html>
<html lang="en" data-theme="light">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>ModernBlog - Beautiful Stories</title>
  <style>
    :root {
      --bg-primary: #fafbfc;
      --bg-secondary: #f1f5f9;
      --bg-card: #ffffff;
      --bg-sidebar: #ffffff;
      --text-primary: #1a202c;
      --text-secondary: #4a5568;
      --text-muted: #718096;
      --accent: #667eea;
      --accent-light: #764ba2;
      --accent-hover: #5a67d8;
      --border: #e2e8f0;
      --border-light: #f7fafc;
      --shadow: rgba(0, 0, 0, 0.04);
      --shadow-md: rgba(0, 0, 0, 0.08);
      --shadow-lg: rgba(0, 0, 0, 0.12);
      --shadow-xl: rgba(0, 0, 0, 0.16);
      --gradient-bg: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      --gradient-card: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
      --gradient-accent: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%);
    }

    [data-theme="dark"] {
      --bg-primary: #0d1117;
      --bg-secondary: #161b22;
      --bg-card: #21262d;
      --bg-sidebar: #1c2128;
      --text-primary: #f0f6fc;
      --text-secondary: #c9d1d9;
      --text-muted: #8b949e;
      --accent: #58a6ff;
      --accent-light: #79c0ff;
      --accent-hover: #388bfd;
      --border: #30363d;
      --border-light: #21262d;
      --shadow: rgba(0, 0, 0, 0.3);
      --shadow-md: rgba(0, 0, 0, 0.4);
      --shadow-lg: rgba(0, 0, 0, 0.5);
      --shadow-xl: rgba(0, 0, 0, 0.6);
      --gradient-bg: linear-gradient(135deg, #238be6 0%, #7c3aed 100%);
      --gradient-card: linear-gradient(135deg, #ec4899 0%, #8b5cf6 100%);
      --gradient-accent: linear-gradient(135deg, #06b6d4 0%, #3b82f6 100%);
    }

    * { margin: 0; padding: 0; box-sizing: border-box; }

    body {
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
      background: var(--bg-primary);
      color: var(--text-primary);
      line-height: 1.5;
      transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
      overflow-x: hidden;
      font-size: 14px;
    }

    header {
      background: rgba(255, 255, 255, 0.95);
      backdrop-filter: blur(20px) saturate(180%);
      border-bottom: 1px solid rgba(255, 255, 255, 0.2);
      box-shadow: 0 4px 16px var(--shadow);
      position: sticky;
      top: 0; z-index: 100;
    }

    [data-theme="dark"] header {
      background: rgba(13, 17, 23, 0.95);
      border-bottom: 1px solid rgba(255, 255, 255, 0.1);
    }

    nav {
      display: flex; justify-content: space-between; align-items: center;
      padding: 0.75rem 1.5rem; max-width: 1400px; margin: 0 auto;
    }

    .logo {
      font-size: 1.5rem; font-weight: 900;
      background: var(--gradient-bg);
      -webkit-background-clip: text; -webkit-text-fill-color: transparent;
      background-clip: text;
      text-shadow: 0 0 20px rgba(102, 126, 234, 0.3);
      letter-spacing: -0.02em;
    }

    .nav-buttons { display: flex; gap: 0.75rem; align-items: center; }

    .btn {
      padding: 0.5rem 1.25rem; border: none; border-radius: 25px; cursor: pointer;
      font-weight: 600; font-size: 0.8rem; transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
      text-decoration: none; display: inline-flex; align-items: center; gap: 0.375rem;
      letter-spacing: 0.025em; position: relative; overflow: hidden;
    }
    .btn::before {
      content: ''; position: absolute; top: 0; left: -100%; width: 100%; height: 100%;
      background: linear-gradient(90deg, transparent, rgba(255,255,255,0.2), transparent);
      transition: left 0.5s;
    }
    .btn:hover::before { left: 100%; }

    .btn-primary {
      background: var(--gradient-bg); color: #fff;
      box-shadow: 0 2px 8px rgba(102, 126, 234, 0.3);
    }
    .btn-primary:hover { transform: translateY(-1px) scale(1.02); box-shadow: 0 4px 12px rgba(102, 126, 234, 0.4); }

    .theme-toggle {
      background: var(--bg-card); border: 2px solid var(--border);
      color: var(--text-primary); cursor: pointer; padding: 0.5rem; border-radius: 25px;
      transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1); font-size: 1rem; box-shadow: 0 2px 6px var(--shadow);
    }
    .theme-toggle:hover { transform: scale(1.05) rotate(12deg); box-shadow: 0 3px 10px var(--shadow-md); }

    .main-container {
      display: flex; min-height: calc(100vh - 70px); max-width: 1400px; margin: 0 auto;
      gap: 1.5rem; padding: 1.5rem;
    }
    .main-container-title { max-width: 1400px; margin: 0 auto; padding: 0.75rem; }
    .content-area { flex: 1; min-width: 0; }

    .hero-section {
      background: var(--gradient-bg); border-radius: 1.25rem; padding: 1.5rem 2rem;
      text-align: center; color: white; margin-bottom: 1.5rem; position: relative; overflow: hidden;
      box-shadow: 0 10px 20px rgba(102, 126, 234, 0.2);
    }
    .hero-section::before {
      content: ''; position: absolute; top: -50%; left: -50%; width: 200%; height: 200%;
      background: radial-gradient(circle at center, rgba(255,255,255,0.1) 0%, transparent 50%);
      animation: heroFloat 8s ease-in-out infinite;
    }
    .hero-section::after {
      content: ''; position: absolute; top: 20%; right: 10%; width: 60px; height: 60px;
      background: rgba(255, 255, 255, 0.1); border-radius: 50%; animation: heroFloat 6s ease-in-out infinite reverse;
    }
    .hero-title { font-size: 2.25rem; font-weight: 900; margin-bottom: 1rem; position: relative; z-index: 2; letter-spacing: -0.02em; line-height: 1.1; }
    .hero-subtitle { font-size: 1.125rem; opacity: 0.95; max-width: 500px; margin: 0 auto; position: relative; z-index: 2; font-weight: 300; }

    .blog-detail {
      background: var(--bg-card); border-radius: 1.25rem; box-shadow: 0 6px 20px var(--shadow-lg);
      border: 1px solid var(--border); overflow: hidden; min-height: 450px; display: flex; flex-direction: column; position: relative;
    }
    .blog-detail::before { content: ''; position: absolute; top: 0; left: 0; right: 0; height: 3px; background: var(--gradient-bg); }
    .blog-detail.has-content { justify-content: flex-start; align-items: stretch; }

    .blog-detail-header {
      padding: 2rem 2.25rem 1.5rem; background: linear-gradient(135deg, var(--accent) 0%, var(--accent-light) 100%);
      color: white; position: relative; overflow: hidden;
    }
    .blog-detail-header::before {
      content: ''; position: absolute; top: -50%; right: -20%; width: 120px; height: 120px;
      background: radial-gradient(circle, rgba(255,255,255,0.1) 0%, transparent 70%); border-radius: 50%;
    }
    .blog-detail-title { font-size: 1.875rem; font-weight: 800; margin-bottom: 1rem; line-height: 1.2; position: relative; z-index: 2; }
    .blog-detail-meta { display: flex; flex-wrap: wrap; gap: 1rem; align-items: center; opacity: 0.95; position: relative; z-index: 2; }
    .blog-meta-item { display: flex; align-items: center; gap: 0.375rem; font-size: 0.8rem; font-weight: 500; }

    .blog-detail-content {
      padding: 2rem; flex: 1; font-size: 1rem; line-height: 1.6; color: var(--text-primary);
      overflow-wrap: break-word; word-wrap: break-word;
    }
    .blog-detail-content h1, .blog-detail-content h2, .blog-detail-content h3,
    .blog-detail-content h4, .blog-detail-content h5, .blog-detail-content h6 {
      color: var(--text-primary); font-weight: 700; margin: 1.5rem 0 1rem 0; line-height: 1.3;
    }
    .blog-detail-content h1 { font-size: 1.75rem; }
    .blog-detail-content h2 { font-size: 1.5rem; }
    .blog-detail-content h3 { font-size: 1.25rem; }
    .blog-detail-content h4 { font-size: 1.125rem; }
    .blog-detail-content h5 { font-size: 1rem; }
    .blog-detail-content h6 { font-size: 0.875rem; }
    .blog-detail-content p { margin-bottom: 1.25rem; text-align: justify; }
    .blog-detail-content strong, .blog-detail-content b { font-weight: 700; color: var(--text-primary); }
    .blog-detail-content em, .blog-detail-content i { font-style: italic; color: var(--text-secondary); }
    .blog-detail-content u { text-decoration: underline; text-decoration-color: var(--accent); }

    .blog-detail-content ul, .blog-detail-content ol { margin: 1rem 0 1.25rem 0; padding-left: 2rem; }
    .blog-detail-content li { margin-bottom: 0.5rem; color: var(--text-primary); }
    .blog-detail-content ul li { list-style-type: disc; }
    .blog-detail-content ol li { list-style-type: decimal; }

    .blog-detail-content blockquote {
      margin: 1.5rem 0; padding: 1rem 1.5rem; border-left: 4px solid var(--accent);
      background: var(--bg-secondary); border-radius: 0 0.5rem 0.5rem 0; font-style: italic; color: var(--text-secondary);
    }

    .blog-detail-content code {
      background: var(--bg-secondary); color: var(--accent);
      padding: 0.125rem 0.375rem; border-radius: 0.25rem; font-family: 'Monaco', 'Menlo', 'Ubuntu Mono', monospace; font-size: 0.875rem;
    }
    .blog-detail-content pre {
      background: var(--bg-secondary); border: 1px solid var(--border); border-radius: 0.5rem; padding: 1rem; margin: 1rem 0;
      overflow-x: auto; font-family: 'Monaco', 'Menlo', 'Ubuntu Mono', monospace; font-size: 0.8125rem; line-height: 1.4;
    }
    .blog-detail-content pre code { background: none; padding: 0; color: var(--text-primary); }

    .blog-detail-content img {
      max-width: 100%; height: auto; border-radius: 0.75rem; margin: 1.5rem 0;
      box-shadow: 0 4px 12px var(--shadow-md); transition: transform 0.3s ease, box-shadow 0.3s ease; cursor: pointer; display: block;
    }
    .blog-detail-content img:hover { transform: scale(1.02); box-shadow: 0 8px 25px var(--shadow-lg); }
    .blog-detail-content figure { margin: 2rem 0; text-align: center; }
    .blog-detail-content figcaption { margin-top: 0.75rem; font-size: 0.875rem; color: var(--text-muted); font-style: italic; text-align: center; }

    .blog-detail-content table {
      width: 100%; border-collapse: collapse; margin: 1.5rem 0; background: var(--bg-card);
      border-radius: 0.5rem; overflow: hidden; box-shadow: 0 2px 8px var(--shadow);
    }
    .blog-detail-content th, .blog-detail-content td { padding: 0.75rem 1rem; text-align: left; border-bottom: 1px solid var(--border); }
    .blog-detail-content th { background: var(--bg-secondary); font-weight: 600; color: var(--text-primary); }
    .blog-detail-content tr:hover { background: var(--bg-secondary); }

    .blog-detail-content a {
      color: var(--accent); text-decoration: none; border-bottom: 1px solid transparent; transition: all 0.3s ease;
    }
    .blog-detail-content a:hover { color: var(--accent-hover); border-bottom-color: var(--accent); }

    .blog-detail-content iframe, .blog-detail-content video, .blog-detail-content embed, .blog-detail-content object {
      max-width: 100%; height: auto; border-radius: 0.5rem; margin: 1.5rem 0;
    }

    .empty-detail {
      display: flex; flex-direction: column; justify-content: center; align-items: center;
      padding: 3rem 1.5rem; text-align: center; height: 100%;
    }
    .empty-detail-icon { font-size: 3rem; margin-bottom: 1.5rem; opacity: 0.5; }
    .empty-detail h3 { font-size: 1.5rem; margin-bottom: 0.75rem; color: var(--text-secondary); font-weight: 700; }
    .empty-detail p { font-size: 1rem; margin-bottom: 2rem; color: var(--text-muted); max-width: 350px; }

    /* Sidebar */
    .sidebar {
      width: 280px; background: var(--bg-sidebar); border-radius: 1.25rem; box-shadow: 0 6px 20px var(--shadow-lg);
      border: 1px solid var(--border); display: flex; flex-direction: column;
      max-height: calc(100vh - 110px); position: sticky; top: 90px;
      overflow: visible; /* was hidden; allow clear inner scroll visibility */
    }
    .sidebar::before { content: ''; position: absolute; top: 0; left: 0; right: 0; height: 3px; background: var(--gradient-accent); }

    .sidebar-header {
      padding: 1.5rem 1.5rem 1rem; background: linear-gradient(135deg, var(--bg-card) 0%, var(--bg-secondary) 100%);
      border-bottom: 1px solid var(--border-light); position: relative;
    }
    .sidebar-title { font-size: 1.25rem; font-weight: 800; color: var(--text-primary); margin-bottom: 0.375rem; display: flex; align-items: center; gap: 0.5rem; }
    .sidebar-subtitle { color: var(--text-muted); font-size: 0.8rem; font-weight: 500; display: flex; align-items: center; gap: 0.375rem; }

    .search-container { margin-top: 1rem; position: relative; }
    .search-input {
      width: 100%; padding: 0.75rem 0.75rem 0.75rem 2.5rem; border: 2px solid var(--border);
      border-radius: 0.75rem; background: var(--bg-primary); color: var(--text-primary); font-size: 0.8rem; transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
    }
    .search-input:focus {
      outline: none; border-color: var(--accent); box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1); transform: translateY(-1px);
    }
    .search-icon { position: absolute; left: 0.75rem; top: 50%; transform: translateY(-50%); color: var(--text-muted); font-size: 1rem; }

    .sidebar-content { flex: 1; overflow-y: auto; padding: 0.375rem 0; }
    .sidebar-content::-webkit-scrollbar { width: 8px; }
    .sidebar-content::-webkit-scrollbar-track { background: transparent; }
    .sidebar-content::-webkit-scrollbar-thumb { background: var(--border); border-radius: 4px; }
    .sidebar-content::-webkit-scrollbar-thumb:hover { background: var(--text-muted); }

    .blog-list-item {
      margin: 0.375rem 0.75rem; padding: 1rem; cursor: pointer; transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
      border-radius: 1rem; border: 2px solid transparent; position: relative; background: var(--bg-card); box-shadow: 0 2px 6px var(--shadow);
    }
    .blog-list-item::before {
      content: ''; position: absolute; top: 0; left: 0; right: 0; height: 2px; background: var(--gradient-bg);
      border-radius: 1rem 1rem 0 0; opacity: 0; transition: opacity 0.3s ease;
    }
    .blog-list-item:hover { transform: translateY(-1px) scale(1.01); box-shadow: 0 4px 12px var(--shadow-md); border-color: var(--border); }
    .blog-list-item:hover::before { opacity: 1; }
    .blog-list-item.active {
      background: linear-gradient(135deg, var(--accent) 0%, var(--accent-light) 100%); color: #fff;
      transform: translateY(-1px) scale(1.01); box-shadow: 0 4px 12px rgba(102, 126, 234, 0.3);
    }
    .blog-list-item.active::before { opacity: 0; }
    .blog-list-item.active .blog-item-title, .blog-list-item.active .blog-item-excerpt, .blog-list-item.active .blog-meta-text { color: #fff; }
    .blog-list-item.active .blog-item-category { background: rgba(255, 255, 255, 0.2); color: #fff; }

    .blog-item-header { display: flex; justify-content: space-between; align-items: flex-start; margin-bottom: 0.75rem; }
    .blog-item-title {
      font-weight: 700; font-size: 1rem; line-height: 1.3; color: var(--text-primary); margin-bottom: 0.5rem;
      display: -webkit-box; -webkit-line-clamp: 2; -webkit-box-orient: vertical; overflow: hidden;
    }
    .blog-item-meta { display: flex; align-items: center; gap: 0.75rem; margin-bottom: 0.75rem; flex-wrap: wrap; }
    .blog-item-category { background: var(--accent); color: white; padding: 0.25rem 0.625rem; border-radius: 12px; font-weight: 600; font-size: 0.7rem; letter-spacing: 0.025em; text-transform: uppercase; }
    .blog-meta-text { color: var(--text-muted); font-size: 0.75rem; font-weight: 500; display: flex; align-items: center; gap: 0.25rem; }
    .blog-item-excerpt { color: var(--text-secondary); font-size: 0.8rem; line-height: 1.4; display: -webkit-box; -webkit-line-clamp: 2; -webkit-box-orient: vertical; overflow: hidden; }

    .delete-btn {
      background: none; border: none; color: var(--text-muted); cursor: pointer; padding: 0.375rem; border-radius: 0.375rem;
      transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1); font-size: 0.875rem; opacity: 0;
    }
    .blog-list-item:hover .delete-btn { opacity: 1; }
    .delete-btn:hover { background: rgba(239, 68, 68, 0.1); color: #ef4444; transform: scale(1.1); }
    .blog-list-item.active .delete-btn { color: rgba(255, 255, 255, 0.7); }
    .blog-list-item.active .delete-btn:hover { background: rgba(255, 255, 255, 0.1); color: white; }

    .modal {
      display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%;
      background: rgba(0, 0, 0, 0.7); backdrop-filter: blur(15px); z-index: 1000; animation: modalFadeIn 0.3s ease;
    }
    .modal-content {
      background: var(--bg-card); margin: 2% auto; padding: 0; width: 85%; max-width: 800px; border-radius: 1.25rem;
      max-height: 90vh; overflow: hidden; box-shadow: 0 15px 30px rgba(0, 0, 0, 0.4);
      animation: modalSlideUp 0.4s cubic-bezier(0.4, 0, 0.2, 1); border: 1px solid var(--border);
    }
    .modal-header { background: var(--gradient-bg); color: white; padding: 1.75rem; position: relative; overflow: hidden; }
    .modal-header::before {
      content: ''; position: absolute; top: -50%; right: -20%; width: 120px; height: 120px;
      background: radial-gradient(circle, rgba(255,255,255,0.1) 0%, transparent 70%); border-radius: 50%; animation: float 6s ease-in-out infinite;
    }
    .modal-header h2 { font-size: 1.5rem; font-weight: 800; margin: 0; position: relative; z-index: 2; }
    .close {
      position: absolute; right: 1.5rem; top: 1.5rem; color: rgba(255, 255, 255, 0.8); font-size: 1.5rem; font-weight: bold; cursor: pointer;
      transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1); z-index: 3;
    }
    .close:hover { color: white; transform: scale(1.1) rotate(90deg); }
    .modal-body { padding: 1.75rem; max-height: 60vh; overflow-y: auto; }

    label { display: block; margin-bottom: 0.5rem; font-weight: 700; color: var(--text-primary); font-size: 0.8rem; letter-spacing: 0.025em; }
    input, textarea, select {
      width: 100%; padding: 0.75rem 1rem; border: 2px solid var(--border); border-radius: 0.75rem; background: var(--bg-primary);
      color: var(--text-primary); font-size: 0.875rem; transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1); font-family: inherit;
    }
    input:focus, textarea:focus, select:focus { outline: none; border-color: var(--accent); box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1); transform: translateY(-1px); }
    textarea { min-height: 180px; resize: vertical; line-height: 1.5; }
    select { cursor: pointer; }

    .ckeditor-container { border: 2px solid var(--border); border-radius: 0.75rem; overflow: hidden; background: var(--bg-primary); transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1); }
    .ckeditor-container:focus-within { border-color: var(--accent); box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1); transform: translateY(-1px); }
    .ck-editor__editable { min-height: 200px !important; font-family: inherit !important; font-size: 0.875rem !important; line-height: 1.6 !important; color: var(--text-primary) !important; background: var(--bg-primary) !important; }

    .image-modal { display: none; position: fixed; z-index: 2000; left: 0; top: 0; width: 100%; height: 100%; background: rgba(0, 0, 0, 0.9); backdrop-filter: blur(10px); }
    .image-modal-content {
      position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%);
      max-width: 90%; max-height: 90%; border-radius: 1rem; box-shadow: 0 25px 50px rgba(0, 0, 0, 0.5);
    }
    .image-modal-close {
      position: absolute; top: 20px; right: 30px; color: white; font-size: 2rem; font-weight: bold; cursor: pointer;
      background: rgba(0, 0, 0, 0.5); width: 50px; height: 50px; border-radius: 50%; display: flex; align-items: center; justify-content: center; transition: all 0.3s ease;
    }
    .image-modal-close:hover { background: rgba(0, 0, 0, 0.8); transform: scale(1.1); }

    .loading { display: inline-block; width: 20px; height: 20px; border: 2px solid rgba(255, 255, 255, 0.3); border-radius: 50%; border-top-color: white; animation: spin 1s ease-in-out infinite; }
    @keyframes spin { to { transform: rotate(360deg); } }

    @keyframes modalFadeIn { from { opacity: 0; } to { opacity: 1; } }
    @keyframes modalSlideUp { from { opacity: 0; transform: translateY(50px) scale(0.95); } to { opacity: 1; transform: translateY(0) scale(1); } }
    @keyframes heroFloat { 0%, 100% { transform: translateY(0px) rotate(0deg); } 33% { transform: translateY(-15px) rotate(1deg); } 66% { transform: translateY(8px) rotate(-1deg); } }
    @keyframes float { 0%, 100% { transform: translateY(0px) translateX(0px) rotate(0deg); } 33% { transform: translateY(-8px) translateX(8px) rotate(1deg); } 66% { transform: translateY(4px) translateX(-4px) rotate(-1deg); } }

    @media (max-width: 1200px) {
      .sidebar { width: 320px; }
      .hero-title { font-size: 2rem; }
      .blog-detail-content { padding: 1.75rem; }
    }
    @media (max-width: 1024px) {
      .main-container { flex-direction: column; padding: 1rem; gap: 1.25rem; }
      .sidebar { width: 100%; max-height: 400px; position: static; order: -1; }
      .hero-title { font-size: 1.875rem; }
      .blog-detail-title { font-size: 1.625rem; }
      .blog-detail-content { padding: 1.5rem; }
      .blog-detail-content img { margin: 1rem 0; }
      .blog-detail-content .image-style-side,
      .blog-detail-content .image-style-align-left,
      .blog-detail-content .image-style-align-right {
        float: none; max-width: 100%; margin: 1rem 0; display: block;
      }
    }
    @media (max-width: 768px) {
      nav { padding: 0.75rem; flex-wrap: wrap; gap: 0.75rem; }
      .main-container { padding: 0.75rem; gap: 1rem; }
      .hero-section { padding: 2rem 1.5rem; }
      .hero-title { font-size: 1.75rem; }
      .hero-subtitle { font-size: 1rem; }
      .blog-detail-header { padding: 1.5rem; }
      .blog-detail-title { font-size: 1.5rem; }
      .blog-detail-content { padding: 1.25rem; font-size: 0.9rem; }
      .blog-detail-content h1 { font-size: 1.5rem; }
      .blog-detail-content h2 { font-size: 1.25rem; }
      .blog-detail-content h3 { font-size: 1.125rem; }
      .sidebar { max-height: 350px; }
      .sidebar-header { padding: 1.25rem; }
      .blog-list-item { margin: 0.25rem 0.5rem; padding: 1rem; }
      .modal-content { width: 90%; margin: 5% auto; border-radius: 1rem; max-width: none; }
      .modal-header, .modal-body { padding: 1.5rem; }
      .modal-body { max-height: 70vh; }
    }
    @media (max-width: 480px) {
      body { font-size: 13px; }
      .logo { font-size: 1.25rem; }
      .nav-buttons { gap: 0.5rem; }
      .btn { padding: 0.5rem 1rem; font-size: 0.75rem; }
      .hero-section { padding: 1.5rem 1rem; }
      .hero-title { font-size: 1.5rem; }
      .hero-subtitle { font-size: 0.925rem; }
      .blog-detail-header { padding: 1.25rem; }
      .blog-detail-content { padding: 1rem; font-size: 0.875rem; line-height: 1.5; }
      .blog-detail-content h1 { font-size: 1.375rem; }
      .blog-detail-content h2 { font-size: 1.125rem; }
      .blog-detail-content h3 { font-size: 1rem; }
      .blog-detail-content img { margin: 0.75rem 0; border-radius: 0.5rem; }
      .blog-detail-content ul, .blog-detail-content ol { padding-left: 1.5rem; }
      .blog-detail-content blockquote { margin: 1rem 0; padding: 0.75rem 1rem; }
      .blog-detail-content table { font-size: 0.8rem; }
      .blog-detail-content th, .blog-detail-content td { padding: 0.5rem 0.75rem; }
      .modal-header, .modal-body { padding: 1.25rem; }
      .sidebar-title { font-size: 1.125rem; }
      .blog-list-item { padding: 0.875rem; }
      .image-modal-close { top: 10px; right: 15px; width: 40px; height: 40px; font-size: 1.5rem; }
    }
    @media (max-width: 320px) {
      .blog-detail-content { padding: 0.875rem; }
      .hero-section { padding: 1.25rem 0.875rem; }
      .modal-header, .modal-body { padding: 1rem; }
    }
  </style>
</head>
<body>
  <header>
    <nav>
      <div class="logo">‚ú® ModernBlog</div>
      <div class="nav-buttons">
        <button class="theme-toggle" id="themeToggle">üåô</button>
        <button class="btn btn-primary" id="newPostBtn">
          <span>‚úèÔ∏è</span>
          <span>Create Post</span>
        </button>
      </div>
    </nav>
  </header>

  <div class="main-container-title">
    <section class="hero-section">
      <h1 class="hero-title">Beautiful Stories Await</h1>
      <p class="hero-subtitle">Discover inspiring content, share your voice, and connect with passionate writers from around the globe</p>
    </section>
  </div>

  <div class="main-container">
    <main class="content-area">
      <section class="blog-detail" id="blogDetail">
        <div class="empty-detail">
          <div class="empty-detail-icon">üìñ</div>
          <h3>Select a Story to Begin</h3>
          <p>Choose any blog post from the beautiful sidebar to start the reading journey, or create the first masterpiece!</p>
          <button class="btn btn-primary" onclick="document.getElementById('newPostBtn').click()">
            <span>‚ú®</span>
            <span>Write Your First Story</span>
          </button>
        </div>
      </section>
    </main>

    <aside class="sidebar">
      <div class="sidebar-header">
        <h2 class="sidebar-title">
          <span>üìö</span>
          <span>Story Collection</span>
        </h2>
        <div class="sidebar-subtitle">
          <span id="postCount">0 stories</span>
          <span>‚Ä¢</span>
          <span>Ready to inspire</span>
        </div>
        <div class="search-container">
          <div class="search-icon">üîç</div>
          <input type="text" id="searchInput" class="search-input" placeholder="Search stories, authors, topics...">
        </div>
      </div>
      <div class="sidebar-content" id="blogList">
        <div class="empty-sidebar">
          <div class="empty-sidebar-icon">‚úçÔ∏è</div>
          <h3>No stories yet</h3>
          <p>Your beautiful collection of stories will appear here. Start by creating your first post!</p>
        </div>
      </div>
    </aside>
  </div>

  <!-- New Post Modal -->
  <div id="postModal" class="modal">
    <div class="modal-content">
      <div class="modal-header">
        <h2>‚ú® Create Your Story</h2>
        <span class="close">&times;</span>
      </div>
      <div class="modal-body">
        <form id="blogForm">
          <div class="form-group">
            <label for="title">üìù Story Title</label>
            <input type="text" id="title" name="title" required placeholder="What's the story about? Make it captivating...">
          </div>
          <div class="form-group">
            <label for="author">üë§ Author Name</label>
            <input type="text" id="author" name="author" required placeholder="Your beautiful name...">
          </div>
          <div class="form-group">
            <label for="category">üè∑Ô∏è Story Category</label>
            <select id="category" name="category" required>
              <option value="">Choose your story's home</option>
              <option value="Technology">üíª Technology & Innovation</option>
              <option value="Lifestyle">üåü Lifestyle & Wellness</option>
              <option value="Travel">‚úàÔ∏è Travel & Adventure</option>
              <option value="Food">üç≥ Food & Culture</option>
              <option value="Business">üíº Business & Entrepreneurship</option>
              <option value="Health">üí™ Health & Fitness</option>
              <option value="Education">üìö Education & Learning</option>
              <option value="Entertainment">üé≠ Entertainment & Arts</option>
              <option value="Personal">üí≠ Personal Growth</option>
              <option value="Science">üî¨ Science & Discovery</option>
            </select>
          </div>
          <div class="form-group">
            <label for="content">‚úçÔ∏è Your Story</label>
            <div class="ckeditor-container">
              <textarea id="content" name="content" required placeholder="Pour thoughts here... format text, add images, and more."></textarea>
            </div>
            <small style="color: var(--text-muted); font-size: 0.75rem; margin-top: 0.5rem; display: block;">
              üí° Format text, add images, create lists, and more using the rich text editor
            </small>
          </div>
          <button type="submit" class="btn btn-primary" style="width: 100%; justify-content: center; padding: 1.25rem; font-size: 1rem;">
            <span>üöÄ</span>
            <span>Publish Your Story</span>
          </button>
        </form>
      </div>
    </div>
  </div>

  <!-- Image Modal -->
  <div id="imageModal" class="image-modal">
    <span class="image-modal-close">&times;</span>
    <img class="image-modal-content" id="modalImage">
  </div>

  <script>
    // Theme toggle
    const themeToggle = document.getElementById('themeToggle');
    const body = document.body;
    const savedTheme = localStorage.getItem('theme') || 'light';
    body.setAttribute('data-theme', savedTheme);
    updateThemeIcon(savedTheme);
    themeToggle.addEventListener('click', () => {
      const currentTheme = body.getAttribute('data-theme');
      const newTheme = currentTheme === 'dark' ? 'light' : 'dark';
      body.style.transition = 'all 0.3s cubic-bezier(0.4, 0, 0.2, 1)';
      body.setAttribute('data-theme', newTheme);
      localStorage.setItem('theme', newTheme);
      updateThemeIcon(newTheme);
      setTimeout(() => { body.style.transition = ''; }, 300);
    });
    function updateThemeIcon(theme) { themeToggle.textContent = theme === 'dark' ? '‚òÄÔ∏è' : 'üåô'; }

    // Modal
    const postModal = document.getElementById('postModal');
    const newPostBtn = document.getElementById('newPostBtn');
    const closeBtns = document.querySelectorAll('.close');
    newPostBtn.addEventListener('click', () => {
      postModal.style.display = 'block';
      document.body.style.overflow = 'hidden';
      setTimeout(() => loadDraft(), 100);
    });
    closeBtns.forEach(btn => btn.addEventListener('click', closeModal));
    function closeModal() {
      postModal.style.display = 'none';
      document.body.style.overflow = 'auto';
    }
    window.addEventListener('click', (e) => { if (e.target === postModal) closeModal(); });

    // Storage and posts
    let blogPosts = JSON.parse(localStorage.getItem('blogPosts') || '[]');
    let activePostId = null;

    // Versioned seeding with merge to guarantee 4th post appears even if older data exists
    const SEED_VERSION = 'v2';
    function seedSamplesIfNeeded() {
      const existing = JSON.parse(localStorage.getItem('blogPosts') || '[]');
      const applied = localStorage.getItem('seedVersion');
      const samplePosts = [
        {
          id: 1,
          title: "The Art of Digital Minimalism: Finding Peace in a Hyperconnected World",
          author: "Elena Rodriguez",
          category: "Technology",
          content: "In our hyperconnected age...",
          excerpt: "In our hyperconnected age, we're bombarded...",
          date: new Date().toLocaleDateString('en-US', { year: 'numeric', month: 'long', day: 'numeric' }),
          readTime: 4,
          createdAt: new Date().toISOString()
        },
        {
          id: 2,
          title: "The Science of Morning Rituals: Designing Your Perfect Day",
          author: "Dr. Marcus Chen",
          category: "Lifestyle",
          content: "Your morning routine is more than just a series of habits...",
          excerpt: "Your morning routine is more than just a series of habits...",
          date: new Date(Date.now() - 86400000).toLocaleDateString('en-US', { year: 'numeric', month: 'long', day: 'numeric' }),
          readTime: 5,
          createdAt: new Date(Date.now() - 86400000).toISOString()
        },
        {
          id: 3,
          title: "Hidden Gems of Northern Portugal: A Journey Off the Beaten Path",
          author: "Isabella Santos",
          category: "Travel",
          content: "While the Algarve beaches and Lisbon's charm capture most visitors' hearts...",
          excerpt: "While the Algarve beaches and Lisbon's charm capture most visitors' hearts...",
          date: new Date(Date.now() - 172800000).toLocaleDateString('en-US', { year: 'numeric', month: 'long', day: 'numeric' }),
          readTime: 6,
          createdAt: new Date(Date.now() - 172800000).toISOString()
        },
        {
          id: 4,
          title: "Exploring Healthy Eating: Beyond Diets and Trends",
          author: "Sophia Clarke",
          category: "Health",
          content: `
            <p>Eating healthy is about balance, not restriction...</p>
<img src="https://picsum.photos/600/300" 
     alt="Healthy Food" 
     style="max-width:100%; border-radius:10px; margin:1rem 0;" />         
        <p>Here‚Äôs a sample daily breakdown:</p>
            <table border="1" cellspacing="0" cellpadding="8" style="border-collapse: collapse; width:100%; text-align:left;">
              <thead style="background:#f3f4f6;">
                <tr><th>Meal</th><th>Example Foods</th><th>Nutrition Focus</th></tr>
              </thead>
              <tbody>
                <tr><td>Breakfast</td><td>Oatmeal with berries & nuts</td><td>High fiber</td></tr>
                <tr><td>Lunch</td><td>Grilled salmon with quinoa</td><td>Healthy fats</td></tr>
                <tr><td>Dinner</td><td>Vegetable stir-fry with tofu</td><td>Plant protein</td></tr>
              </tbody>
            </table>
            <p>Healthy eating is not about perfection but consistent habits.</p>
          `,
          excerpt: "Healthy eating is about balance, not restriction. Let's look at some core principles...",
          date: new Date().toLocaleDateString('en-US', { year: 'numeric', month: 'long', day: 'numeric' }),
          readTime: 3,
          createdAt: new Date().toISOString()
        }
      ];

      if (applied !== SEED_VERSION) {
        const byId = new Map(existing.map(p => [p.id, true]));
        const merged = [...samplePosts.filter(p => !byId.has(p.id)), ...existing];
        localStorage.setItem('blogPosts', JSON.stringify(merged));
        localStorage.setItem('seedVersion', SEED_VERSION);
        return merged;
      }
      return existing;
    }

    // Form submission
    const blogForm = document.getElementById('blogForm');
    blogForm.addEventListener('submit', (e) => {
      e.preventDefault();
      const submitBtn = blogForm.querySelector('button[type="submit"]');
      const originalText = submitBtn.innerHTML;
      submitBtn.innerHTML = '<span>üîÑ</span><span>Publishing...</span>';
      submitBtn.disabled = true;

      setTimeout(() => {
        const formData = new FormData(blogForm);
        const content = formData.get('content') || '';
        const post = {
          id: Date.now(),
          title: formData.get('title'),
          author: formData.get('author'),
          category: formData.get('category'),
          content,
          excerpt: content.length > 150 ? content.substring(0, 150) + '...' : content,
          date: new Date().toLocaleDateString('en-US', { year: 'numeric', month: 'long', day: 'numeric' }),
          readTime: Math.max(1, Math.ceil((content.trim().split(/\s+/).filter(Boolean)).length / 200)),
          createdAt: new Date().toISOString()
        };
        blogPosts.unshift(post);
        localStorage.setItem('blogPosts', JSON.stringify(blogPosts));
        blogForm.reset();
        clearDraft();
        closeModal();
        renderBlogList();
        showBlogDetail(post.id);
        showNotification('‚ú® Story published successfully!', 'success');
        submitBtn.innerHTML = originalText;
        submitBtn.disabled = false;
      }, 800);
    });

    function renderBlogList() {
      const blogList = document.getElementById('blogList');
      const postCount = document.getElementById('postCount');
      postCount.textContent = `${blogPosts.length} ${blogPosts.length === 1 ? 'story' : 'stories'}`;

      if (blogPosts.length === 0) {
        blogList.innerHTML = `
          <div class="empty-sidebar">
            <div class="empty-sidebar-icon">‚úçÔ∏è</div>
            <h3>No stories yet</h3>
            <p>Your beautiful collection of stories will appear here. Start by creating your first post!</p>
          </div>
        `;
        return;
      }

      blogList.innerHTML = blogPosts.map((post, index) => `
        <div class="blog-list-item ${activePostId === post.id ? 'active' : ''}" onclick="showBlogDetail(${post.id})" style="animation-delay: ${index * 0.1}s">
          <div class="blog-item-header">
            <div style="flex: 1;">
              <div class="blog-item-title">${post.title}</div>
            </div>
            <button class="delete-btn" onclick="deleteBlogPost(${post.id}, event)" title="Delete story">üóëÔ∏è</button>
          </div>
          <div class="blog-item-meta">
            <span class="blog-item-category">${post.category}</span>
            <span class="blog-meta-text">üë§ ${post.author}</span>
            <span class="blog-meta-text">‚è±Ô∏è ${post.readTime}min</span>
          </div>
          <div class="blog-item-excerpt">${post.excerpt}</div>
        </div>
      `).join('');

      updateSearchFunctionality();
    }

    function showBlogDetail(id) {
      const post = blogPosts.find(p => p.id === id);
      if (!post) return;
      activePostId = id;

      const blogDetail = document.getElementById('blogDetail');

      const categoryEmojis = {
        'Technology': 'üíª','Lifestyle': 'üåü','Travel': '‚úàÔ∏è','Food': 'üç≥','Business': 'üíº',
        'Health': 'üí™','Education': 'üìö','Entertainment': 'üé≠','Personal': 'üí≠','Science': 'üî¨'
      };
      const categoryEmoji = categoryEmojis[post.category] || 'üìù';

      const hasHTML = /<\/?[a-z][\s\S]*>/i.test(post.content);
      const formattedContent = hasHTML
        ? post.content
        : post.content
            .split('\n')
            .map(p => p.trim() ? `<p>${p}</p>` : '<br>')
            .join('');

      blogDetail.className = 'blog-detail has-content';
      blogDetail.innerHTML = `
        <div class="blog-detail-header">
          <h1 class="blog-detail-title">${post.title}</h1>
          <div class="blog-detail-meta">
            <div class="blog-meta-item"><span>${categoryEmoji}</span><span>${post.category}</span></div>
            <div class="blog-meta-item"><span>üë§</span><span>${post.author}</span></div>
            <div class="blog-meta-item"><span>üìÖ</span><span>${post.date}</span></div>
            <div class="blog-meta-item"><span>‚è±Ô∏è</span><span>${post.readTime} min read</span></div>
          </div>
        </div>
        <div class="blog-detail-content">
          ${formattedContent}
        </div>
      `;

      renderBlogList();
      blogDetail.scrollTop = 0;
    }

    function updateSearchFunctionality() {
      const searchInput = document.getElementById('searchInput');
      if (searchInput && !searchInput.hasEventListener) {
        searchInput.hasEventListener = true;
        searchInput.addEventListener('input', debounce((e) => {
          const searchTerm = e.target.value.toLowerCase().trim();
          filterPosts(searchTerm);
        }, 300));
      }
    }

    function filterPosts(searchTerm) {
      if (!searchTerm) { renderBlogList(); return; }
      const filteredPosts = blogPosts.filter(post =>
        (post.title || '').toLowerCase().includes(searchTerm) ||
        (post.content || '').toLowerCase().includes(searchTerm) ||
        (post.author || '').toLowerCase().includes(searchTerm) ||
        (post.category || '').toLowerCase().includes(searchTerm)
      );

      const blogList = document.getElementById('blogList');
      const postCount = document.getElementById('postCount');
      postCount.textContent = `${filteredPosts.length} ${filteredPosts.length === 1 ? 'story' : 'stories'}`;

      if (filteredPosts.length === 0) {
        blogList.innerHTML = `
          <div class="empty-sidebar">
            <div class="empty-sidebar-icon">üîç</div>
            <h3>No stories found</h3>
            <p>Try searching with different keywords or create a new story!</p>
          </div>
        `;
        return;
      }

      function highlightSearchTerm(text, term) {
        if (!term || !text) return text || '';
        const regex = new RegExp(`(${term.replace(/[.*+?^${}()|[\\]\\\\]/g, '\\\\$&')})`, 'gi');
        return String(text).replace(regex, '<mark style="background: rgba(102, 126, 234, 0.2); padding: 0.125rem 0.25rem; border-radius: 0.25rem;">$1</mark>');
      }

      blogList.innerHTML = filteredPosts.map((post, index) => `
        <div class="blog-list-item ${activePostId === post.id ? 'active' : ''}" onclick="showBlogDetail(${post.id})" style="animation-delay: ${index * 0.1}s">
          <div class="blog-item-header">
            <div style="flex: 1;">
              <div class="blog-item-title">${highlightSearchTerm(post.title, searchTerm)}</div>
            </div>
            <button class="delete-btn" onclick="deleteBlogPost(${post.id}, event)" title="Delete story">üóëÔ∏è</button>
          </div>
          <div class="blog-item-meta">
            <span class="blog-item-category">${post.category}</span>
            <span class="blog-meta-text">üë§ ${highlightSearchTerm(post.author, searchTerm)}</span>
            <span class="blog-meta-text">‚è±Ô∏è ${post.readTime}min</span>
          </div>
          <div class="blog-item-excerpt">${highlightSearchTerm(post.excerpt, searchTerm)}</div>
        </div>
      `).join('');
    }

    function deleteBlogPost(id, event) {
      if (event) event.stopPropagation();
      const post = blogPosts.find(p => p.id === id);
      if (!post) return;
      if (confirm(`Are you sure you want to delete "${post.title}"? This action cannot be undone.`)) {
        blogPosts = blogPosts.filter(p => p.id !== id);
        localStorage.setItem('blogPosts', JSON.stringify(blogPosts));
        if (activePostId === id) { activePostId = null; showEmptyState(); }
        renderBlogList();
        showNotification('üóëÔ∏è Story deleted successfully', 'info');
      }
    }

    function showEmptyState() {
      const blogDetail = document.getElementById('blogDetail');
      blogDetail.className = 'blog-detail';
      blogDetail.innerHTML = `
        <div class="empty-detail">
          <div class="empty-detail-icon">üìñ</div>
          <h3>Select a Story to Begin</h3>
          <p>Choose any blog post from the beautiful sidebar to start the reading journey, or create the first masterpiece!</p>
          <button class="btn btn-primary" onclick="document.getElementById('newPostBtn').click()">
            <span>‚ú®</span>
            <span>Write Your First Story</span>
          </button>
        </div>
      `;
    }

    function showNotification(message, type = 'info') {
      const notification = document.createElement('div');
      notification.style.cssText = `
        position: fixed; top: 100px; right: 2rem;
        background: ${type === 'success' ? 'linear-gradient(135deg, #10b981, #059669)'
          : type === 'error' ? 'linear-gradient(135deg, #ef4444, #dc2626)'
          : 'linear-gradient(135deg, #3b82f6, #1d4ed8)'};
        color: white; padding: 1rem 1.5rem; border-radius: 1rem; box-shadow: 0 10px 25px rgba(0,0,0,0.2);
        z-index: 10000; font-weight: 600; animation: slideInRight 0.3s ease; max-width: 300px;
      `;
      notification.textContent = message;
      document.body.appendChild(notification);
      setTimeout(() => {
        notification.style.animation = 'slideOutRight 0.3s ease';
        setTimeout(() => document.body.removeChild(notification), 300);
      }, 3000);
    }

    document.addEventListener('keydown', (e) => {
      if (e.target.tagName === 'INPUT' || e.target.tagName === 'TEXTAREA') {
        if (e.key === 'Escape') closeModal();
        return;
      }
      if ((e.ctrlKey || e.metaKey) && e.key === 'n') { e.preventDefault(); newPostBtn.click(); }
      if (e.key === 'Escape') closeModal();
      if (blogPosts.length > 0) {
        const currentIndex = blogPosts.findIndex(post => post.id === activePostId);
        if (e.key === 'ArrowDown' && currentIndex < blogPosts.length - 1) {
          e.preventDefault(); showBlogDetail(blogPosts[currentIndex + 1].id);
        } else if (e.key === 'ArrowUp' && currentIndex > 0) {
          e.preventDefault(); showBlogDetail(blogPosts[currentIndex - 1].id);
        } else if (e.key === 'ArrowDown' && currentIndex === -1 && blogPosts.length > 0) {
          e.preventDefault(); showBlogDetail(blogPosts.id);
        }
      }
      if (e.key === '/') {
        e.preventDefault();
        const searchInput = document.getElementById('searchInput');
        if (searchInput) searchInput.focus();
      }
    });

    // Draft autosave
    let draftSaveTimeout;
    const formFields = ['title', 'author', 'category', 'content'];
    function setupAutoSave() {
      formFields.forEach(field => {
        const el = document.getElementById(field);
        if (el) el.addEventListener('input', () => {
          clearTimeout(draftSaveTimeout);
          draftSaveTimeout = setTimeout(saveDraft, 1500);
        });
      });
    }
    function saveDraft() {
      const draft = {};
      let hasContent = false;
      formFields.forEach(field => {
        const el = document.getElementById(field);
        if (el && el.value.trim()) { draft[field] = el.value; hasContent = true; }
      });
      if (hasContent) localStorage.setItem('blogDraft', JSON.stringify(draft));
    }
    function loadDraft() {
      const draft = localStorage.getItem('blogDraft');
      if (draft) {
        const data = JSON.parse(draft);
        formFields.forEach(field => {
          const el = document.getElementById(field);
          if (el && data[field]) el.value = data[field];
        });
      }
    }
    function clearDraft() { localStorage.removeItem('blogDraft'); }

    function debounce(func, wait) {
      let timeout;
      return function (...args) {
        clearTimeout(timeout);
        timeout = setTimeout(() => func.apply(this, args), wait);
      };
    }

    function initializeApp() {
      // Ensure seed applied and merged so all four posts exist
      blogPosts = seedSamplesIfNeeded();

      renderBlogList();
      setupAutoSave();

      // Show the first post by default
      if (blogPosts.length > 0) showBlogDetail(blogPosts.id);

      const style = document.createElement('style');
      style.textContent = `
        @keyframes slideInRight { from { transform: translateX(100%); opacity: 0; } to { transform: translateX(0); opacity: 1; } }
        @keyframes slideOutRight { from { transform: translateX(0); opacity: 1; } to { transform: translateX(100%); opacity: 0; } }
      `;
      document.head.appendChild(style);
    }

    // Initialize
    initializeApp();
  </script>
</body>
</html>
